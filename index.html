<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The Morning Alchemist</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="The Alchemist">

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.container {
  width: 94%;
  max-width: 480px;
  text-align: center;
}
h1 {
  font-size: 1.3rem;
  margin-bottom: 0.2rem;
  background: linear-gradient(to right, #60a5fa, #c084fc);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.phase {
  font-size: 0.9rem;
  color: #93c5fd;
  margin-top: 0.4rem;
  text-transform: uppercase;
}
.movement {
  font-size: 1.35rem;
  font-weight: 700;
  margin-top: 0.6rem;
}
.timer {
  font-size: 3.8rem;
  font-weight: 300;
  margin: 0.8rem 0;
}
.description {
  font-size: 0.95rem;
  line-height: 1.55;
  background: rgba(255,255,255,0.06);
  padding: 12px;
  border-radius: 10px;
}
.bandha {
  font-size: 0.85rem;
  margin-top: 0.6rem;
  color: #a7f3d0;
}
.next {
  font-size: 0.8rem;
  opacity: 0.6;
  margin-top: 0.8rem;
}
.controls button {
  margin: 6px;
  padding: 12px 18px;
  font-size: 1rem;
  border-radius: 12px;
  border: none;
  background: #2563eb;
  color: white;
}
.secondary { background: #334155; }
#progressWrapper {
  position: fixed;
  bottom: 28px;
  left: 5%;
  width: 90%;
}
#progressContainer {
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,0.15);
  border-radius: 6px;
}
#progressBar {
  height: 100%;
  width: 0%;
  background: linear-gradient(to right, #38bdf8, #818cf8);
}
</style>
</head>

<body>

<div class="container">
  <h1>‚ö° The Morning Alchemist</h1>

  <div class="phase" id="phase"></div>
  <div class="movement" id="movement"></div>
  <div class="timer" id="timer"></div>
  <div class="description" id="description"></div>
  <div class="bandha" id="bandha"></div>
  <div class="next" id="next"></div>

  <div class="controls">
    <button class="secondary" onclick="prev()">‚èÆ</button>
    <button onclick="start()">‚ñ∂</button>
    <button onclick="pause()">‚è∏</button>
    <button class="secondary" onclick="next()">‚è≠</button>
  </div>
</div>

<div id="progressWrapper">
  <div id="progressContainer"><div id="progressBar"></div></div>
</div>

<!-- WAKE LOCK -->
<video id="wakelock" loop muted playsinline style="display:none">
  <source src="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb20AAABtb292AAAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAA+gAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAABkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" type="video/mp4">
</video>

<script>
/* DATA */
const practice = [
{
  phase: "Phase 1 ‚Äî Lymphatic Awakening",
  steps: [
    {
      name: "Sacred Shaking",
      time: 120,
      desc: "Feet shoulder-width. Soft knees. Shake from heels upward. Arms loose. Inhale nose, sigh out mouth. Visualize stress leaving fingers and feet.",
      bandha: "Relax pelvic floor"
    },
    {
      name: "Thymus & Door of Life",
      time: 90,
      desc: "Tap sternum gently. Smile. Then rotate torso, arms swinging to kidneys and belly. Keep breath slow.",
      bandha: "None"
    }
  ]
},
{
  phase: "Phase 2 ‚Äî Electric Spine",
  steps: [
    {
      name: "Ego Eradicator + Breath of Fire",
      time: 150,
      desc: "Sit tall. Arms at 60¬∞, thumbs up. Rapid nasal breath. Navel snaps in. Feel energy climbing spine.",
      bandha: "Mula Bandha last 10s"
    },
    {
      name: "Spinal Flex (Camel Ride)",
      time: 120,
      desc: "Hands on ankles. Inhale chest forward, exhale round back. Increase speed gradually. Generate spinal heat.",
      bandha: "Light core tone"
    }
  ]
},
{
  phase: "Phase 3 ‚Äî Flow State (VO‚ÇÇ Max)",
  steps: [
    {
      name: "Hybrid Beast Flow",
      time: 360,
      desc: "Down Dog ‚Üí Spinal Wave ‚Üí Loaded Beast ‚Üí Front Step Through ‚Üí Crab Reach ‚Üí Vinyasa. No stopping. Deep Ujjayi breath.",
      bandha: "Uddiyana Bandha"
    }
  ]
},
{
  phase: "Phase 4 ‚Äî Coherence & Chemistry",
  steps: [
    {
      name: "Heart Coherence Breathing",
      time: 180,
      desc: "Hands on heart. Inhale 5s, exhale 5s through chest center. Let body soften.",
      bandha: "Heart focus"
    },
    {
      name: "Elevated Emotion",
      time: 120,
      desc: "Feel gratitude or love as if it already happened. Let emotion expand from heart into every cell.",
      bandha: "Emotional signature"
    }
  ]
}
];

/* STATE */
let s=0,m=0,time=practice[0].steps[0].time,interval=null;

/* UI */
const phaseEl=phaseEl=document.getElementById("phase"),
movementEl=document.getElementById("movement"),
timerEl=document.getElementById("timer"),
descEl=document.getElementById("description"),
bandhaEl=document.getElementById("bandha"),
nextEl=document.getElementById("next"),
progressBar=document.getElementById("progressBar");

/* AUDIO */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
function beep(count=1){
  for(let i=0;i<count;i++){
    const o=audioCtx.createOscillator();
    const g=audioCtx.createGain();
    o.frequency.value=880;
    g.gain.value=0.12;
    o.connect(g); g.connect(audioCtx.destination);
    o.start(audioCtx.currentTime + i*0.25);
    o.stop(audioCtx.currentTime + i*0.25 + 0.15);
  }
}

/* RENDER */
function render(){
  const step=practice[s].steps[m];
  phaseEl.textContent=practice[s].phase;
  movementEl.textContent=step.name;
  descEl.textContent=step.desc;
  bandhaEl.textContent="Focus: "+step.bandha;
  timerEl.textContent=`${Math.floor(time/60).toString().padStart(2,"0")}:${(time%60).toString().padStart(2,"0")}`;
}

/* CONTROLS */
function start(){
  if(interval) return;
  audioCtx.resume();
  document.getElementById("wakelock").play().catch(()=>{});
  beep(1);
  interval=setInterval(()=>{
    time--;
    if(time<0) next(true);
    render();
  },1000);
}
function pause(){ clearInterval(interval); interval=null; }
function next(auto=false){
  beep(3); // üîîüîîüîî Ÿæÿß€åÿßŸÜ ÿ≠ÿ±⁄©ÿ™
  m++;
  if(m>=practice[s].steps.length){
    m=0; s++;
    if(s>=practice.length){
      pause();
      movementEl.textContent="Practice Complete ‚ö°";
      descEl.textContent="State upgraded. Chemistry shifted.";
      timerEl.textContent="";
      return;
    }
  }
  time=practice[s].steps[m].time;
}
function prev(){
  if(--m<0){ if(--s<0){s=0;m=0;} else m=practice[s].steps.length-1; }
  time=practice[s].steps[m].time;
}

render();
</script>

</body>
</html>
